!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");i(6),i(4),i(3),i(5),i(2),i(1),AFRAME.registerComponent("super-hands",{schema:{colliderState:{default:"collided"},colliderEvent:{default:"hit"},grabStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},grabEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]},stretchStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},stretchEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]},dragDropStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},dragDropEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]}},multiple:!1,init:function(){this.HOVER_EVENT="hover-start",this.UNHOVER_EVENT="hover-end",this.GRAB_EVENT="grab-start",this.UNGRAB_EVENT="grab-end",this.STRETCH_EVENT="stretch-start",this.UNSTRETCH_EVENT="stretch-end",this.DRAGOVER_EVENT="dragover-start",this.UNDRAGOVER_EVENT="dragover-end",this.DRAGDROP_EVENT="drag-drop",this.otherSuperHand=null,this.hoverEls=[],this.lastHover=null,this.grabbing=!1,this.stretching=!1,this.dragging=!1,this.carried=null,this.stretched=null,this.dragged=null,this.unHover=this.unHover.bind(this),this.unWatch=this.unWatch.bind(this),this.onHit=this.onHit.bind(this),this.onGrabStartButton=this.onGrabStartButton.bind(this),this.onGrabEndButton=this.onGrabEndButton.bind(this),this.onStretchStartButton=this.onStretchStartButton.bind(this),this.onStretchEndButton=this.onStretchEndButton.bind(this),this.onDragDropStartButton=this.onDragDropStartButton.bind(this),this.onDragDropEndButton=this.onDragDropEndButton.bind(this),this.system.registerMe(this)},update:function(t){this.unRegisterListeners(t),this.registerListeners()},remove:function(){this.system.unregisterMe(this),this.unRegisterListeners()},pause:function(){},play:function(){},onGrabStartButton:function(t){this.grabbing=!0},onGrabEndButton:function(t){this.dispatchMouseEventAll("mouseup",this.el,!0),this.dispatchMouseEventAll("click",this.el,!0),this.carried&&(this.carried.emit(this.UNGRAB_EVENT,{hand:this.el}),this.carried=null),this.grabbing=!1},onStretchStartButton:function(t){this.stretching=!0},onStretchEndButton:function(t){this.stretched&&(this.otherSuperHand.stretched&&this.stretched.emit(this.UNSTRETCH_EVENT,{hand:this.el}),this.stretched=null),this.stretching=!1},onDragDropStartButton:function(t){this.dragging=!0},onDragDropEndButton:function(t){var e,i=this.dragged,s=this.peekHoveredEl();this.dragging=!1,i&&(this.dispatchMouseEvent(i,"dragend",this.el),s&&(e={hand:this.el,dropped:i,on:s},this.dispatchMouseEvent(i,"dragleave",s),this.dispatchMouseEvent(s,"dragleave",i),this.dispatchMouseEvent(s,"drop",i),this.dispatchMouseEvent(i,"drop",s),s=this.findTarget(this.DRAGDROP_EVENT,e,!0),s&&(this.emitCancelable(i,this.DRAGDROP_EVENT,e),this._unHover(s)))),this.dragged=null},onHit:function(t){var e,i,s,n=this,r=t.detail.el,h=!1;r&&(e=this.hoverEls.indexOf(r),e===-1&&(this.hoverEls.push(r),r.addEventListener("stateremoved",this.unWatch),this.dispatchMouseEvent(r,"mouseover",this.el)),s=function(){return h||(h=!0,r=n.hoverEls.length?n.peekHoveredEl():r),r},i=function(){return h?r:n.peekHoveredEl()||r},this.grabbing&&(this.dispatchMouseEventAll("mousedown",this.el),this.carried||(this.carried=this.findTarget(this.GRAB_EVENT,{hand:this.el}))),this.stretching&&!this.stretched&&(this.stretched=this.findTarget(this.STRETCH_EVENT,{hand:this.el})),this.dragging&&!this.dragged&&(this.dragged=this.carried||i(),this.dispatchMouseEvent(this.dragged,"dragstart",this.el),this.hover()),this.carried&&this.stretched&&!this.dragged||this.hover())},hover:function(){var t,e;this.lastHover=null,e=this.peekHoveredEl(),e&&(this.dragging&&this.dragged?(this.dispatchMouseEvent(this.peekHoveredEl(),"dragenter",this.dragged),this.dispatchMouseEvent(this.dragged,"dragenter",this.peekHoveredEl()),t={hand:this.el,hovered:e,carried:this.dragged},e=this.findTarget(this.DRAGOVER_EVENT,t,!0),e&&(e.removeEventListener("stateremoved",this.unWatch),e.addEventListener("stateremoved",this.unHover),this.emitCancelable(this.dragged,this.DRAGOVER_EVENT,t),this.lastHover=this.DRAGOVER_EVENT)):(e=this.findTarget(this.HOVER_EVENT,{hand:this.el},!0),e&&(e.removeEventListener("stateremoved",this.unWatch),e.addEventListener("stateremoved",this.unHover),this.lastHover=this.HOVER_EVENT)))},peekHoveredEl:function(){var t=this;return this.hoverEls.filter(function(e){return e!==t.carried&&e!==t.dragged&&e!==t.stretched})[0]},useHoveredEl:function(){var t=this.hoverEls.shift();return this._unHover(t),t},unHover:function(t){t.detail.state===this.data.colliderState&&(this._unWatch(t.target),this._unHover(t.target))},_unHover:function(t){var e;t.removeEventListener("stateremoved",this.unHover),this.lastHover===this.DRAGOVER_EVENT?(e={hand:this.el,hovered:t,carried:this.dragged},this.emitCancelable(t,this.UNDRAGOVER_EVENT,e),this.dragged&&this.emitCancelable(this.dragged,this.UNDRAGOVER_EVENT,e)):this.lastHover===this.HOVER_EVENT&&this.emitCancelable(t,this.UNHOVER_EVENT,{hand:this.el}),this.hover()},unWatch:function(t){t.detail.state===this.data.colliderState&&(t.target.removeEventListener("stateremoved",this.unWatch),this._unWatch(t.target))},_unWatch:function(t){var e=this.hoverEls.indexOf(t);e!==-1&&this.hoverEls.splice(e,1),this.dragging&&this.dragged?(this.dispatchMouseEvent(t,"dragleave",this.dragged),this.dispatchMouseEvent(this.dragged,"dragleave",t)):this.dispatchMouseEvent(t,"mouseout",this.el)},registerListeners:function(){var t=this;this.el.addEventListener(this.data.colliderEvent,this.onHit),this.data.grabStartButtons.forEach(function(e){t.el.addEventListener(e,t.onGrabStartButton)}),this.data.grabEndButtons.forEach(function(e){t.el.addEventListener(e,t.onGrabEndButton)}),this.data.stretchStartButtons.forEach(function(e){t.el.addEventListener(e,t.onStretchStartButton)}),this.data.stretchEndButtons.forEach(function(e){t.el.addEventListener(e,t.onStretchEndButton)}),this.data.dragDropStartButtons.forEach(function(e){t.el.addEventListener(e,t.onDragDropStartButton)}),this.data.dragDropEndButtons.forEach(function(e){t.el.addEventListener(e,t.onDragDropEndButton)})},unRegisterListeners:function(t){var e=this;t=t||this.data,0!==Object.keys(t).length&&(this.el.removeEventListener(t.colliderEvent,this.onHit),t.grabStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onGrabStartButton)}),t.grabEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onGrabEndButton)}),t.stretchStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onStretchStartButton)}),t.stretchEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onStretchEndButton)}),t.dragDropStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onDragDropStartButton)}),t.dragDropEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onDragDropEndButton)}))},emitCancelable:function(t,e,i){var s,n;return i=i||{},s={bubbles:!0,cancelable:!0,detail:i},s.detail.target=s.detail.target||t,n=new CustomEvent(e,s),t.dispatchEvent(n)},dispatchMouseEvent:function(t,e,i){var s=new MouseEvent(e,{relatedTarget:i});t.dispatchEvent(s)},dispatchMouseEventAll:function(t,e,i){var s,n=this,r=this.hoverEls;for(i&&(r=r.filter(function(t){return t!==n.carried&&t!==n.dragged&&t!==n.stretched})),s=0;s<r.length;s++)this.dispatchMouseEvent(r[s],t,e)},findTarget:function(t,e,i){var s,n=this,r=this.hoverEls;for(i&&(r=r.filter(function(t){return t!==n.carried&&t!==n.dragged&&t!==n.stretched})),s=0;s<r.length;s++)if(!this.emitCancelable(r[s],t,e))return r[s];return null}})},function(t,e){"use strict";AFRAME.registerComponent("clickable",{schema:{onclick:{type:"string"}},init:function(){this.CLICKED_STATE="clicked",this.CLICK_EVENT="grab-start",this.UNCLICK_EVENT="grab-end",this.clickers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.CLICK_EVENT,this.start),this.el.addEventListener(this.UNCLICK_EVENT,this.end)},remove:function(){this.el.removeEventListener(this.CLICK_EVENT,this.start),this.el.removeEventListener(this.UNCLICK_EVENT,this.end)},start:function(t){this.el.addState(this.CLICKED_STATE),this.clickers.indexOf(t.detail.hand)===-1&&this.clickers.push(t.detail.hand)},end:function(t){var e=this.clickers.indexOf(t.detail.hand);e!==-1&&this.clickers.splice(e,1),this.clickers.length<1&&this.el.removeState(this.CLICKED_STATE)}})},function(t,e){"use strict";AFRAME.registerComponent("drag-droppable",{init:function(){this.HOVERED_STATE="dragover",this.HOVER_EVENT="dragover-start",this.UNHOVER_EVENT="dragover-end",this.DRAGDROP_EVENT="drag-drop",this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.HOVER_EVENT,this.start),this.el.addEventListener(this.UNHOVER_EVENT,this.end)},remove:function(){this.el.removeEventListener(this.HOVER_EVENT,this.start),this.el.removeEventListener(this.UNHOVER_EVENT,this.end)},start:function(t){this.el.addState(this.HOVERED_STATE)},end:function(t){this.el.removeState(this.HOVERED_STATE)}})},function(t,e){"use strict";AFRAME.registerComponent("grabbable",{schema:{usePhysics:{default:"ifavailable"}},init:function(){this.GRABBED_STATE="grabbed",this.GRAB_EVENT="grab-start",this.UNGRAB_EVENT="grab-end",this.constraint=null,this.grabbed=!1,this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.GRAB_EVENT,this.start),this.el.addEventListener(this.UNGRAB_EVENT,this.end)},update:function(t){"never"===this.data.usePhysics&&this.constraint&&(this.el.body.world.removeConstraint(this.constraint),this.constraint=null)},tick:function(){if(this.grabbed&&!this.constraint&&"only"!==this.data.usePhysics){var t=this.grabber.getAttribute("position"),e=this.previousPosition||t,i={x:t.x-e.x,y:t.y-e.y,z:t.z-e.z},s=this.el.getAttribute("position");this.previousPosition=t,this.el.setAttribute("position",{x:s.x+i.x,y:s.y+i.y,z:s.z+i.z})}},remove:function(){this.el.removeEventListener(this.GRAB_EVENT,this.start),this.el.removeEventListener(this.UNGRAB_EVENT,this.end)},start:function(t){this.grabbed||(this.grabber=t.detail.hand,this.grabbed=!0,this.el.addState(this.GRABBED_STATE),t.preventDefault&&t.preventDefault(),"never"!==this.data.usePhysics&&this.el.body&&this.grabber.body?(this.constraint=new window.CANNON.LockConstraint(this.el.body,this.grabber.body),this.el.body.world.addConstraint(this.constraint)):"only"!==this.data.usePhysics&&(this.previousPosition=null))},end:function(t){t.detail.hand===this.grabber&&(this.constraint&&(this.el.body.world.removeConstraint(this.constraint),this.constraint=null),this.grabber=null,this.grabbed=!1,this.el.removeState(this.GRABBED_STATE))}})},function(t,e){"use strict";AFRAME.registerComponent("hoverable",{init:function(){this.HOVERED_STATE="hovered",this.HOVER_EVENT="hover-start",this.UNHOVER_EVENT="hover-end",this.hoverers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.HOVER_EVENT,this.start),this.el.addEventListener(this.UNHOVER_EVENT,this.end)},remove:function(){this.el.removeEventListener(this.HOVER_EVENT,this.start),this.el.removeEventListener(this.UNHOVER_EVENT,this.end)},start:function(t){this.el.addState(this.HOVERED_STATE),this.hoverers.indexOf(t.detail.hand)===-1&&this.hoverers.push(t.detail.hand)},end:function(t){var e=this.hoverers.indexOf(t.detail.hand);e!==-1&&this.hoverers.splice(e,1),this.hoverers.length<1&&this.el.removeState(this.HOVERED_STATE)}})},function(t,e){"use strict";AFRAME.registerComponent("stretchable",{schema:{usePhysics:{default:"ifavailable"}},init:function(){this.STRETCHED_STATE="stretched",this.STRETCH_EVENT="stretch-start",this.UNSTRETCH_EVENT="stretch-end",this.stretched=!1,this.stretchers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.STRETCH_EVENT,this.start),this.el.addEventListener(this.UNSTRETCH_EVENT,this.end)},update:function(t){},tick:function(){if(this.stretched){var t=(new THREE.Vector3).copy(this.el.getAttribute("scale")),e=(this.el.getAttribute("geometry"),(new THREE.Vector3).copy(this.stretchers[0].getAttribute("position"))),i=(new THREE.Vector3).copy(this.stretchers[1].getAttribute("position")),s=e.distanceTo(i),n=1;if(null!==this.previousStretch&&0!==s&&(n=s/this.previousStretch),this.previousStretch=s,t=t.multiplyScalar(n),this.el.setAttribute("scale",t),this.el.body&&"never"!==this.data.usePhysics){var r=this.el.body.shapes[0];r.halfExtents?(r.halfExtents.scale(n,r.halfExtents),r.updateConvexPolyhedronRepresentation()):this.shapeWarned||(console.warn("Unable to stretch physics body: unsupported shape"),this.shapeWarned=!0),this.el.body.updateBoundingRadius()}}},remove:function(){this.el.removeEventListener(this.STRETCH_EVENT,this.start),this.el.removeEventListener(this.UNSTRETCH_EVENT,this.end)},start:function(t){this.stretched||(this.stretchers.push(t.detail.hand),2===this.stretchers.length&&(this.stretched=!0,this.previousStretch=null,this.el.addState(this.STRETCHED_STATE)),t.preventDefault&&t.preventDefault())},end:function(t){var e=this.stretchers.indexOf(t.detail.hand);e!==-1&&(this.stretchers.splice(e,1),this.stretched=!1,this.el.removeState(this.STRETCHED_STATE))}})},function(t,e){"use strict";AFRAME.registerSystem("super-hands",{init:function(){this.superHands=[]},registerMe:function(t){1===this.superHands.length&&(this.superHands[0].otherSuperHand=t,t.otherSuperHand=this.superHands[0]),this.superHands.push(t)},unregisterMe:function(t){var e=this.superHands.indexOf(t);e!==-1&&this.superHands.splice(e,1),this.superHands.forEach(function(e){e.otherSuperHand===t&&(e.otherSuperHand=null)})}})}]);